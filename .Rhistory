unnest(AUTHOR) %>%
group_by(AUTHOR) %>%
count(BIBTEXKEY)
df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR) %>%
unnest(AUTHOR) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
arrange(desc(n))
df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR) %>%
unnest(AUTHOR) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY))
df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR) %>%
unnest(AUTHOR) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
arrange(desc(n_key))
df %>% select(AUTHOR,AFFILIATION,AFFILIATION.1)
df %>% select(AUTHOR,AFFILIATION,AFFILIATION.1) -> authors
View(authors)
v <- "INRAE BORDEAUX UR ETBX FRA ; INRAE"
as.list(strsplit(x, ";")[[1]])
as.list(strsplit(v, ";")[[1]])
df %>% select(AUTHOR,AFFILIATION)
df %>% select(AUTHOR,AFFILIATION) %>% slice(1) %>% pull(AFFILIATION)
df %>% select(AUTHOR,AFFILIATION) %>% slice(1) %>% pull(AFFILIATION) -> v
v
as.list(strsplit(v, ";")[[1]])
df %>% select(AUTHOR,AFFILIATION) %>% slice(1)
df %>% select(AUTHOR,AFFILIATION) %>% slice(1) %>% unnest(AUTHOR)
df %>% select(AUTHOR,AFFILIATION) %>% slice(1)
df %>% select(AUTHOR,AFFILIATION) %>% slice(1) %>% mutate(AFFILIATION = as.list(AFFILIATION(v, ";")[[1]]))
df %>% select(AUTHOR,AFFILIATION) %>% slice(1) %>% mutate(AFFILIATION = as.list(strsplit(AFFILIATION, ";")[[1]]))
df %>% select(AUTHOR,AFFILIATION) %>% slice(1)
df %>% select(AUTHOR,AFFILIATION) %>% slice(1)  -> test
test %>% mutate(AFFILIATION = as.list(strsplit(AFFILIATION, ";")[[1]]))
test %>% mutate(AFFILIATION = as.list(strsplit(AFFILIATION, ";")[[1]])) %>% nest(AFFILIATION)
as.list(strsplit(AFFILIATION, ";")[[1]])
test %>% mutate(AFFILIATION = as.list(strsplit(AFFILIATION, ";")[[1]]))
tr <- function(string){
as.list(strsplit(string, ";")[[1]])
}
df %>% select(AUTHOR,AFFILIATION) %>% slice(1)
df %>% select(AUTHOR,AFFILIATION) %>% slice(1) %>%
mutate(aff = tr(AFFILIATION))
df %>% select(AUTHOR,AFFILIATION) %>% slice(1) -> t
t$newcol = tr(t$AFFILIATION)
tr <- function(string){
list(as.list(strsplit(string, ";")[[1]]))
}
df %>% select(AUTHOR,AFFILIATION) %>% slice(1) %>% mutate(AFFILIATION = tr(AFFILIATION))
df %>% select(AUTHOR,AFFILIATION) %>% slice(1) %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]])))
df %>% select(AUTHOR,AFFILIATION) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]])))
df %>% select(AUTHOR,AFFILIATION) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]]))) %>% unnest()
df %>% select(AUTHOR,AFFILIATION) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]]))) -> grouped
df
grouped
View(grouped)
grouped %>% slice(1) %>% unnest
grouped %>% slice(1) %>% unnest() %>% unnest()
grouped %>% slice(1) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION))
grouped %>% slice(1:20) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION))
grouped %>% slice(1:50) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION))
grouped %>% slice(1:100) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION))
grouped %>% slice(1:80) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION))
grouped %>% slice(1:80) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(str_detect(AFFILIATION, "INRAE"))
grouped %>% slice(1:80) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(str_detect(AFFILIATION, "IRSTEA"))
grouped %>% slice(1:80) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
grouped %>% slice(1:90) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
grouped %>% slice(1:90)
grouped %>% slice(80:90)
grouped %>% slice(80:83)
grouped %>% slice(83)
grouped %>% slice(83) %>% unnest() %>% unnest()
grouped %>% slice(83) %>% pull(AUTHOR)
grouped %>% slice(83) %>% select(AUTHOR)
grouped %>% slice(83) %>% select(AUTHOR) %>% unnest
grouped %>% slice(83) %>% select(AFFILIATION) %>% unnest
grouped %>% slice(83) %>% select(AFFILIATION) %>% unnest %>% unnest
# Qui est d'ETBX ? --------------------------------------------------------
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]]))) -> grouped
grouped %>% slice(83)
# Qui est d'ETBX ? --------------------------------------------------------
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% PUB00057566) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]]))) -> grouped
# Qui est d'ETBX ? --------------------------------------------------------
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% "PUB00057566") %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]]))) -> grouped
grouped %>% slice(1:90) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
grouped %>% slice(1:83) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
# Qui est d'ETBX ? --------------------------------------------------------
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY == "PUB00057566") %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]]))) -> grouped
grouped %>% slice(1:83) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
grouped %>% slice(1:82) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
grouped %>% slice(1:50) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
grouped %>% slice(1:60) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
grouped %>% slice(1:70) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
grouped %>% slice(1:80) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
grouped %>% slice(1:81) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
grouped %>% slice(1:82) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
grouped %>% slice(82)
grouped %>% slice(82) %>% select(AUTHOR)
grouped %>% slice(82) %>% select(AUTHOR) %>% unnest
# Qui est d'ETBX ? --------------------------------------------------------
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]]))) -> grouped
grouped %>% slice(1:82) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
grouped %>% slice(1:100) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
grouped %>% slice(1:200) %>% unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>%
filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
# Qui est d'ETBX ? --------------------------------------------------------
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]]))) %>% mutate(l = map(AUTHOR,length))
# Qui est d'ETBX ? --------------------------------------------------------
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]]))) %>%  rowwise() %>% mutate(l = map(AUTHOR,length))
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]])))
# Qui est d'ETBX ? --------------------------------------------------------
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]]))) %>% mutate(l = length(AUTHOR))
# Qui est d'ETBX ? --------------------------------------------------------
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]]))) %>% mutate(l = length(AUTHOR), l2 = length(AFFILIATION))
# Qui est d'ETBX ? --------------------------------------------------------
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]]))) %>% mutate(l = length(AUTHOR), l2 = length(AFFILIATION), diff = l2 - l)
# Qui est d'ETBX ? --------------------------------------------------------
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]]))) %>% mutate(l = length(AUTHOR), l2 = length(AFFILIATION), diff = l2 - l) %>% filter(diff != 0)
# Qui est d'ETBX ? --------------------------------------------------------
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565","PUB00061139","PUB00063885","PUB00056781")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]])))
# Qui est d'ETBX ? --------------------------------------------------------
# Les retirés sont problématiques (pas le meme nombre d'auteur et d"affilliation)
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565","PUB00061139","PUB00063885","PUB00056781")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]])))
# Qui est d'ETBX ? --------------------------------------------------------
# Les retirés sont problématiques (pas le meme nombre d'auteur et d"affilliation)
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565","PUB00061139","PUB00063885","PUB00056781")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]])))%>%
unnest() %>% unnest()
# Qui est d'ETBX ? --------------------------------------------------------
# Les retirés sont problématiques (pas le meme nombre d'auteur et d"affilliation)
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565","PUB00061139","PUB00063885","PUB00056781")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]])))%>%
unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION))
# Qui est d'ETBX ? --------------------------------------------------------
# Les retirés sont problématiques (pas le meme nombre d'auteur et d"affilliation)
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565","PUB00061139","PUB00063885","PUB00056781")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]])))%>%
unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>% filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA"))
# Qui est d'ETBX ? --------------------------------------------------------
# Les retirés sont problématiques (pas le meme nombre d'auteur et d"affilliation)
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565","PUB00061139","PUB00063885","PUB00056781")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]])))%>%
unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>% filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA")) %>% distinc(AUTHOR)
# Qui est d'ETBX ? --------------------------------------------------------
# Les retirés sont problématiques (pas le meme nombre d'auteur et d"affilliation)
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565","PUB00061139","PUB00063885","PUB00056781")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]])))%>%
unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>% filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA")) %>% distinct(AUTHOR)
# Qui est d'ETBX ? --------------------------------------------------------
# Les retirés sont problématiques (pas le meme nombre d'auteur et d"affilliation)
df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565","PUB00061139","PUB00063885","PUB00056781")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]])))%>%
unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>% filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA")) %>% distinct(AUTHOR) %>% pull()
# Qui est d'ETBX ? --------------------------------------------------------
# Les retirés sont problématiques (pas le meme nombre d'auteur et d"affilliation)
auteurs_ETBX <- df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565","PUB00061139","PUB00063885","PUB00056781")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]])))%>%
unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>% filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA")) %>% distinct(AUTHOR) %>% pull()
# Qui est d'ETBX ? --------------------------------------------------------
# Les retirés sont problématiques (pas le meme nombre d'auteur et d"affilliation) et à corriger.
auteurs_ETBX <- df %>% select(AUTHOR,AFFILIATION, BIBTEXKEY) %>% filter(!BIBTEXKEY %in% c("PUB00057566","PUB00057565","PUB00061139","PUB00063885","PUB00056781")) %>% rowwise() %>% mutate(AFFILIATION = list(as.list(strsplit(AFFILIATION, ";")[[1]])))%>%
unnest() %>% unnest() %>% mutate(AFFILIATION = str_trim(AFFILIATION)) %>% filter(AFFILIATION %in% c("IRSTEA BORDEAUX UR ETBX FRA","INRAE BORDEAUX UR ETBX FRA")) %>% distinct(AUTHOR) %>% pull()
list_bib <- list.files(pattern = ".bib")
library(purrr)
purrr::map(list_bib,bib2df)
library(bib2df)
purrr::map(list_bib,bib2df)
purrr::map_df(list_bib,bib2df)
df <-bind_rows(
bib2df::bib2df("export_2020.bib"),
bib2df::bib2df("export_2019.bib"),
bib2df::bib2df("export_2018.bib"),
bib2df::bib2df("export_2017.bib")
)
# Import et mise en tableau
bib_df <- purrr::map_df(list_bib,bib2df)
## Barplot du nombre d'entrées par catégorie (à customiser)
bib_df %>% select(CATEGORY, AUTHOR, TITLE, YEAR) %>%
unnest(AUTHOR) %>%
group_by(YEAR) %>%
count(CATEGORY) %>%
arrange(desc(n)) %>%
ggplot(aes(x = CATEGORY, y = n)) +
geom_col(color = "black", aes(fill = CATEGORY))+
geom_label(aes(label = n)) +
facet_wrap(~YEAR, scales = "free") +
guides(fill = FALSE) +
coord_flip()
## Moche, mauvaise idée...mais je laisse quand même
bib_df %>% select(CATEGORY, AUTHOR, TITLE, YEAR) %>%
unnest(AUTHOR) %>%
group_by(YEAR) %>%
count(CATEGORY) %>%
arrange(desc(n)) %>%
ggplot(aes(x = YEAR, y = n)) +
geom_line(aes(color = CATEGORY)) +
geom_point(aes(fill = CATEGORY), shape=21, color = "black")
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
arrange(desc(n_key))
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
arrange(desc(n_key)) %>%
top_n(10)
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
top_n(10)
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
top_n(10)
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
top_n(9)
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
top_n(10)
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
top_n(11)
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
slice(10)
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
slice(1:10)
ggplot(aes(x = AUTHOR, y =  n_key)) +
geom_col()
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
slice(1:10) %>%
ggplot(aes(x = AUTHOR, y =  n_key)) +
geom_col()
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
slice(1:10) %>%
ggplot(aes(x = AUTHOR, y =  n_key)) +
geom_col() +
coord_flip()
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(AUTHOR, -n_key), y =  n_key)) +
geom_col() +
coord_flip()
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(AUTHOR, n_key), y =  n_key)) +
geom_col() +
coord_flip()
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(AUTHOR, n_key), y =  n_key)) +
geom_col(aes(fill = AUTHOR), color = "black") +
coord_flip()
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(AUTHOR, n_key), y =  n_key)) +
geom_col(aes(fill = AUTHOR), color = "black") +
geom_label(aes(label = n_key)) +
coord_flip()
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(AUTHOR, n_key), y =  n_key)) +
geom_col(aes(fill = AUTHOR), color = "black") +
geom_label(aes(label = n_key)) +
coord_flip() +
guides(fill = FALSE)
## Idem mais stack des types d'entrées
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR, CATEGORY) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(AUTHOR, n_key), y =  n_key)) +
geom_col(aes(fill = AUTHOR), color = "black") +
geom_label(aes(label = n_key)) +
coord_flip() +
guides(fill = FALSE)
## Idem mais stack des types d'entrées
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR, CATEGORY) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
slice(1:10) %>%
ggplot(aes(x = reorder(AUTHOR, n_key), y =  n_key)) +
geom_col(aes(fill = CATEGORY), color = "black") +
geom_label(aes(label = n_key)) +
coord_flip()
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR, CATEGORY) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
slice(1:10)
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR, CATEGORY) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key))
## Idem mais stack des types d'entrées
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR, CATEGORY) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
top_n(AUTHOR,n_key)
top_10_auteurs <- bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
slice(1:10) %>% pull(AUTHOR)
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR, CATEGORY) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
filter(AUTHOR %in% top_10_auteurs)
ggplot(aes(x = reorder(AUTHOR, n_key), y =  n_key)) +
geom_col(aes(fill = CATEGORY), color = "black") +
geom_label(aes(label = n_key)) +
coord_flip()
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR, CATEGORY) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
filter(AUTHOR %in% top_10_auteurs) %>%
ggplot(aes(x = reorder(AUTHOR, n_key), y =  n_key)) +
geom_col(aes(fill = CATEGORY), color = "black") +
geom_label(aes(label = n_key)) +
coord_flip()
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR, CATEGORY) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
filter(AUTHOR %in% top_10_auteurs) %>%
ggplot(aes(x = reorder(AUTHOR, n_key), y =  n_key)) +
geom_col(aes(fill = CATEGORY), color = "black") +
coord_flip()
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR, CATEGORY) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
filter(AUTHOR %in% top_10_auteurs) %>%
ggplot(aes(x = reorder(AUTHOR, n_key), y =  n_key)) +
geom_col(aes(fill = CATEGORY), color = "black") +
geom_text(aes(x = reorder(AUTHOR, n_key), y =  n_key, label = n_key)) +
coord_flip()
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR, CATEGORY) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
filter(AUTHOR %in% top_10_auteurs) %>%
ggplot(aes(x = reorder(AUTHOR, n_key), y =  n_key)) +
geom_col(aes(fill = CATEGORY), color = "black") +
coord_flip()
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR, CATEGORY) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
group_by(AUTHOR) %>%
mutate(n_max = sum(n_key)) %>%
ungroup() %>%
filter(AUTHOR %in% top_10_auteurs) %>%
ggplot(aes(x = reorder(AUTHOR, n_key), y =  n_key)) +
geom_col(aes(fill = CATEGORY), color = "black") +
geom_label(aes(y = n_max,label = n_max))
bib_df %>% select(BIBTEXKEY,CATEGORY, AUTHOR, TITLE, YEAR, AFFILIATION) %>%
unnest(AUTHOR) %>%
filter(AUTHOR %in% auteurs_ETBX) %>%
group_by(AUTHOR, CATEGORY) %>%
summarise(n_key = n_distinct(BIBTEXKEY)) %>%
ungroup() %>%
arrange(desc(n_key)) %>%
group_by(AUTHOR) %>%
mutate(n_max = sum(n_key)) %>%
ungroup() %>%
filter(AUTHOR %in% top_10_auteurs) %>%
ggplot(aes(x = reorder(AUTHOR, n_key), y =  n_key)) +
geom_col(aes(fill = CATEGORY), color = "black") +
geom_label(aes(y = n_max,label = n_max)) +
coord_flip()
usethis::use_readme_md()
1925+370
library(DBI)
library(RPostgres)
library(tidyverse)
library(dbplyr)
# Connexion database ------------------------------------------------------
BDD_IDEA <- dbConnect(RPostgres::Postgres(),host="194.199.250.56", port=5432,user="postgres", password="sql")
source('~/.active-rstudio-document', echo=TRUE)
